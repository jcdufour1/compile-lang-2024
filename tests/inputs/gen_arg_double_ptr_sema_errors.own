type coll import = std.collections
type util import = std.util
type io import = std.io

type Token struct {
    num i32
}

type Arr struct(<ItemT>) {
    buf ItemT*
    count u64
}

fn arr_new(max_capacity ''usize, ItemT Type, init_elems ItemT[] = [], file Str = #file, line i32 = #line, column i32 = #column) Arr(<ItemT>) {
    let arr Arr(<ItemT>) = {util.alloc(max_capacity, ItemT), 0}
    return arr
}

fn main() i32 {
    let num i32 = 3
    let ptr i32* = &num
    let ptr_ptr i32** = &ptr

    {
        let arr coll.Arr(<Token*, 1>) = coll.arr_new(1, Token)
        let arr2 coll.Arr(<Token**, 1>) = coll.arr_new(1, Token***)
        let arr3 coll.Arr(<Token***, 1>) = coll.arr_new(1, Token****)
    }

    {
        let arr coll.Arr(<Token*, 1>) = coll.arr_new(1, Token, [util.null(Token)])
        let arr2 coll.Arr(<Token**, 1>) = coll.arr_new(1, Token***, [util.null(Token)])
        let arr3 coll.Arr(<Token***, 1>) = coll.arr_new(1, Token****, [util.null(Token)])
    }

    return 0
}
