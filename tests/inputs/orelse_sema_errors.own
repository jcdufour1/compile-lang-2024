util :: import = std.util
io :: import = std.io

do_thing :: fn(should_succeed u1) util.Optional(<i32>) {
    if should_succeed => return .some(9)
    return .none
}

do_thing_with_err_val :: fn(should_succeed u1) util.Result(<i32, i64>) {
    if should_succeed => return .ok(9)
    return .error(27)
}

FALSE :: def 0
TRUE :: def 1

thing1 :: fn() {
    num i32 := do_thing(TRUE) orelse {
        io.print_int(8)
    }
}

thing2 :: fn() {
    num i32 := do_thing(TRUE) orelse {
        io.print_int(8)
        yield 8
    }
}

thing3 :: fn() {
    num i32 := do_thing(TRUE) orelse {
        io.print_int(8)
        yield 8
        return
    }
}

thing4 :: fn() {
    num i32 := do_thing(TRUE) orelse(err) {
        io.print_int(8)
        yield 8
        return
    }
}

thing5 :: fn() {
    num u8 := do_thing(TRUE) orelse {
        return
    }
}

main :: fn() i32 {
    thing1()
    thing2()
    thing3()
    thing4()
    thing5()

    return 0
}
