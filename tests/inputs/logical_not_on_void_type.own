
extern("c") isdigit :: fn(character i32)

Opt_int :: enum {
    number i32
    none i1
}

Token :: struct {
    num i32
    string u8*
}

get_token :: fn() Token {
    return {.num = 34, .string = "hello"}
}

read_num :: fn(string Str) Opt_int {
    if (!get_token()) {
        return Opt_int.none(0);
    }
    if (!isdigit(unsafe_cast<i32>string[0])) {
        return Opt_int.none(0);
    }
    // TODO: consider if last if should be an error
    if (!string[0]) {
        return Opt_int.none(0);
    }
    return Opt_int.number(9)
}

main :: fn() i32 {
    read_num("hello")
    return 0
}

