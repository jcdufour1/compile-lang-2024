rt :: import = std.runtime

printf :: extern("c")  fn(format_string u8*, args opaque...) i32

do_thing :: fn(should_succeed u1) rt.Optional(<i32>) {
    if should_succeed => return .some(9)
    return .none
}

do_thing_with_err_val :: fn(should_succeed u1) rt.Result(<i32, i64>) {
    if should_succeed => return .ok(9)
    return .error(27)
}

FALSE :: def = 0
TRUE :: def = 1

thing1 :: fn() {
    num u8 := do_thing(TRUE)?
    printf("num = %d\n", num)
}

thing2 :: fn() rt.Result(<i32, u8>) {
    do_thing_with_err_val(TRUE)?
    return .ok(8)
}

thing3 :: fn() rt.Result(<i32, u8>) {
    do_thing(TRUE)?
    return .ok(8)
}

main :: fn() i32 {
    thing1()
    thing2()
    thing3()

    return 0
}
