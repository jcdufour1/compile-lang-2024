
util :: import = std.util
io :: import = std.io

Token :: struct {
    id i32
    inner Token*
}

main :: fn() i32 {
    token1 Token := {.id = 7, .inner = unsafe_cast<Token*>0}
    token2 Token := {.id = 8, .inner = &token1}

    io.printf("token1: .id = %d, .inner = ", token1.id)
    token_ptr_print(token1.inner)
    io.printf("\n")

    io.printf("token2: .id = %d, .inner.id = %d\n", token2.id, token2.inner.id)

    return 0
}

token_ptr_print :: fn(pointer Token*) {
    buf := util.alloc(<u8>)()

    if (pointer == util.null(<Token>)()) {
        io.printf("(nil)")
        return
    }
    io.printf("%p", unsafe_cast<opaque*>pointer)
}
