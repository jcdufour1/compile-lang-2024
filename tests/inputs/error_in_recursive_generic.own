type io import = std.io

fn add(<RtnType>)(lhs i32, rhs i32) RtnType {
    if rhs < 0 {
        return unsafe_cast<RtnType>add(<RtnType>)(lhs - 1, rhs + 1)
    } 
    if rhs > 0 {
        return unsafe_cast<RtnType>add(<i31>)(lhs + 1, rhs - 1)
    }
    return lhs
}

fn add2(<RtnType>)(lhs i32, rhs i32) RtnType {
    if rhs < 0 {
        return add2(lhs - 1, rhs + 1)
    } 
    if rhs > 0 {
        return add2(<RtnType>)(lhs + 1, rhs - 1)
    }
    return lhs
}

fn add3(<RtnType>)(lhs i32, rhs i32) RtnType {
    if rhs < 0 {
        return add2(lhs - 1, rhs + 1)
    } 
    if rhs > 0 {
        return add2(<RtnType>)(lhs + 1, rhs - 1)
    }
    return lhs
}

fn main() i32 {
    io.printf("%d\n", add(<i32>)(56, -34))
    io.printf("%d\n", add2(<i32>)(57, -3))
    add3(58, -2)
    return 0
}
